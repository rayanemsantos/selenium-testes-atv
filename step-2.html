<!DOCTYPE html>
<html>
<head>
<title>Marcar Consulta</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<!-- Custom styles for this template -->
<link href="sticky-footer-navbar.css" rel="stylesheet">

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Marcar Consulta</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">FAQ</a>
          </li>
        </ul>
        <span class="navbar-text">
          Tratamento especializado
        </span>
      </div>
      <button class="btn" type="submit" id="logout">Sair</button>
    </div>
  </nav>
<div class="position-relative">
  <div class="position-absolute top-0 end-0 p-3" style="z-index: 11">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="10000">
        <div class="toast-header bg-danger">
        <strong class="me-auto text-white">Atenção!</strong>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
        Preencha todos os campos!
        </div>
    </div>
</div> 
<div class="container">
  <div class="card mt-5">
      <div class="card-header">
          <h1>Especialidade</h1>
      </div>
      <div class="card-body"> 
        <form>
          <div class="form-group mb-3">  
            <label for="cars">Especialidade:</label>
            <select class="form-select"  id="especialidade" name="cars">
              <option value="">Selecione</option>
              <option value="clinico">Clínico Geral</option>
              <option value="denista">Dentista</option>
            </select>
          </div>

          <div class="form-group mb-3">
            <label for="cars">Tipo de atendimento:</label>
            <select class="form-select"  id="tipo_atendimento" name="tipo_atendimento">
              <option value="">Selecione</option>
              <option value="clinico">Clínico</option>
              <option value="COVID">COVID</option>
            </select>
          </div>
          <div>
            <button type="button" class="btn btn-primary mt-3" id="continue" onclick="myFunction()">Continuar</button>
          </div>
        </form> 
      </div>
    </div>
</div>
</div>
<script>
  document.getElementById("continue").onclick = function() {
      myFunction()
  };
  document.getElementById("logout").onclick = function() {
    logout();
    window.open("index.html", "_self");
  };
  function myFunction() {
    var especialidade = document.getElementById("especialidade").value
    var tipo_atendimento = document.getElementById("tipo_atendimento").value
    if(especialidade !== "" && tipo_atendimento !== ""){
      var storage = localStorage.getItem("data");
      storage = JSON.parse(storage)
      var new_obj = {
        ...storage, 
        especialidade:especialidade,
        tipo_atendimento:tipo_atendimento
      }
      localStorage.setItem("data", JSON.stringify(new_obj));
      if (document.getElementById("tipo_atendimento").value === "COVID"){
        window.open("step-alternative.html", "_self");
      } else {
        window.open("step-5.html", "_self");
      }
    } else {
      showToast();
    }

  }
</script>
<script src="main.js"></script>
</body>
</html>